<project name = "unix-tools">
    <target name="init">
        <mkdir dir="build"/>
        <mkdir dir="build/classes"/>
        <mkdir dir="build/shell-files"/>
        <mkdir dir="build/classes/test"/>
        <mkdir dir="build/classes/src"/>
        <copy todir = "build/shell">
            <fileset dir = "shell-files"/>
        </copy>
        <copy file = "README.md" tofile = "build/README.md"/>
    </target>

    <target name = "clean">
        <delete dir = "build"/>
    </target>

    <target name = "compile" depends = "init">
        <javac srcdir = "src" destdir = "build/classes/src" includeAntRuntime = "false"/>
    </target>

    <path id="classpath">
        <fileset dir="lib/test" includes="*.jar"/>
        <fileset dir="build/classes/src" includes="*.class"/>
    </path>

    <target name = "compile-test" depends = "compile">
        <javac srcdir = "test" destdir= "build/classes/test"
               classpath="lib/test/junit-4.10.jar;build/classes/src" includeAntRuntime = "false"/>
    </target>

    <target name="run-tests" depends="compile-test">
        <java classname="org.junit.runner.JUnitCore"
              classpath="lib/test/junit-4.10.jar;
                    build/classes/src/;
                    build/classes/test/">
            <arg value="shwetado.unixtools.CutTest"/>
            <arg value="shwetado.unixtools.HeadTest"/>
            <arg value="shwetado.unixtools.ReduceBlankTest"/>
            <arg value="shwetado.unixtools.SortTest"/>
            <arg value="shwetado.unixtools.TailTest"/>
            <arg value="shwetado.unixtools.UniqTest"/>
            <arg value="shwetado.unixtools.WordCountTest"/>
        </java>
    </target>

    <target name = "createJar" depends = "compile,init">
        <jar destfile = "build/unix-tools.jar" basedir = "out"/>
    </target>

    <target name = "generateDocs">
        <javadoc packagenames = "shwetado.unixtools.*"
                 sourcepath = "src"
                 destdir = "lib/docs"
                 author  = "true" version = "true"/>
    </target>

    <target name = "createZip" depends = "createJar,compile,init,generateDocs">
        <zip destfile = "unix-tools.zip" basedir = "build/classes/src" update = "true"/>
    </target>

</project>